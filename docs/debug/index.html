<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Debugging | Eclipse Embedded CDT</title>
<link rel="stylesheet" href="https://gnu-mcu-eclipse.github.io/web-preview/css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="https://gnu-mcu-eclipse.github.io/web-preview/css/modern-business.css?202008050934">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://gnu-mcu-eclipse.github.io/web-preview/css/customstyles.css?202008050934">
<link rel="stylesheet" href="https://gnu-mcu-eclipse.github.io/web-preview/css/boxshadowproperties.css?202008050934">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="https://gnu-mcu-eclipse.github.io/web-preview/css/theme-blue.css?202008050934">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="https://gnu-mcu-eclipse.github.io/web-preview/js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
<script src="https://gnu-mcu-eclipse.github.io/web-preview/js/toc.js"></script>
<script src="https://gnu-mcu-eclipse.github.io/web-preview/js/customscripts.js"></script>

<link rel="shortcut icon" href="https://gnu-mcu-eclipse.github.io/web-preview/images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="web-jekyll" href="https://gnu-mcu-eclipse.github.io/web-preview/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks" style="">
        <div style="display: inline-block; float: left; margin-top: 8px; margin-left: auto; margin-right: 10px;"><img src="/web-preview/images/company_logo.png" alt="logo" width="32px" height="32px"/></div>
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="/web-preview/">&nbsp;<span class="projectTitle"> Eclipse Embedded CDT</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <li class="active"><a href="/web-preview/news">News</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Links<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a class="extern" href="https://marketplace.eclipse.org/content/eclipse-embedded-cdt" target="_blank" rel="noopener">Eclipse Marketplace</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://ci.eclipse.org/embed-cdt/" target="_blank" rel="noopener">Eclipse Jenkins</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://dev.eclipse.org/committers/committertools/stats.php" target="_blank" rel="noopener">Eclipse Analytics</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">GitHub<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a class="extern" href="https://github.com/eclipse-embed-cdt/" target="_blank" rel="noopener">Eclipse Embedded CDT</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/xpack/" target="_blank" rel="noopener">xPack Core Tools</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/xpack-dev-tools/" target="_blank" rel="noopener">3rd Party xPack Tools</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/xpacks/" target="_blank" rel="noopener">3rd Party xPacks</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Forums<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a class="extern" href="https://www.tapatalk.com/groups/xpack/" target="_blank" rel="noopener">The xPack Forums</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://gitter.im/xpack/" target="_blank" rel="noopener">The xPack Chatroom</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="/web-preview/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: '/web-preview/search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Debugging">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3 sticky" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle"> </li>
  
  
  
  <li>
      <a title="Getting Started" href="#">Getting Started</a>
      <ul>
          
          
          
          <li><a title="Overview" href="/web-preview/">Overview</a></li>
          
          
          
          
          
          
          <li><a title="Features" href="/web-preview/plugins/features/">Features</a></li>
          
          
          
          
          
          
          <li><a title="Install prerequisites" href="/web-preview/plugins/prerequisites/">Install prerequisites</a></li>
          
          
          
          
          
          
          <li><a title="About" href="/web-preview/about/">About</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="News" href="#">News</a>
      <ul>
          
          
          
          <li><a title="Latest News" href="/web-preview/news/">Latest News</a></li>
          
          
          
          
          
          
          <li><a title="Archive" href="/web-preview/news/archive/">Archive</a></li>
          
          
          
          
          
          
          <li><a title="Tags" href="/web-preview/tags/">Tags</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Support" href="#">Support</a>
      <ul>
          
          
          
          <li><a title="Overview" href="/web-preview/support/">Overview</a></li>
          
          
          
          
          
          
          <li><a class="extern" title="The xPack Forums" href="https://www.tapatalk.com/groups/xpack/" target="_blank" rel="noopener">The xPack Forums</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Contributor Info" href="#">Contributor Info</a>
      <ul>
          
          
          
          <li><a title="Overview" href="/web-preview/develop/">Overview</a></li>
          
          
          
          
          
          
          <li><a title="Links" href="/web-preview/develop/links/">Links</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Maintainer Info" href="#">Maintainer Info</a>
      <ul>
          
          
          
          <li><a title="Overview" href="/web-preview/maintain/">Overview</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="License" href="#">License</a>
      <ul>
          
          
          
          <li><a class="extern" title="Eclipse Public License 2.0" href="https://www.eclipse.org/legal/epl-2.0/" target="_blank" rel="noopener">Eclipse Public License 2.0</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Home" href="#">Home</a>
      <ul>
          
          
          
          <li><a title="Eclipse Embedded CDT" href="/web-preview/">Eclipse Embedded CDT</a></li>
          
          
          
          
          
          
          <li><a class="extern" title="The xPack Project" href="https://xpack.github.io" target="_blank" rel="noopener">The xPack Project</a></li>
          
          
          
          
          
          
          <li><a class="extern" title="GNU MCU Eclipse (deprecated)" href="https://gnu-mcu-eclipse.github.io" target="_blank" rel="noopener">GNU MCU Eclipse (deprecated)</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Debugging</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    


   <h2 id="quicklinks">Quicklinks</h2>

<p>If you know all about debugging, and all you need is how to install/configure/use the debugging plug-ins, the direct links are below.</p>

<p>In short, for bare metal embedded development, we highly recommend solutions that can be used on all major platforms (Windows, macOS and GNU/Linux), with hardware probes that implement the SWD protocol and support tracing via the SWO pin. The preferred probes that match the above requirements are <a href="http://www.segger.com/j-link-edu.html">J-Link EDU</a>/<a href="http://www.segger.com/jlink_base.html">J-Link</a>, from <a href="http://www.segger.com/">SEGGER</a>.</p>

<ul>
  <li><a href="/web-preview/debug/jlink/install/">J-Link install</a></li>
  <li><a href="/web-preview/debug/jlink/">J-Link plug-in usage</a></li>
  <li><a href="https://xpack.github.io/openocd/install/">xPack OpenOCD install</a></li>
  <li><a href="/web-preview/debug/openocd/">xPack OpenOCD plug-in usage</a></li>
  <li><a href="https://xpack.github.io/qemu-arm/">xPack QEMU Arm install</a></li>
  <li><a href="/web-preview/debug/qemu/">xPack QEMU Arm plug-in usage</a></li>
  <li><a href="/web-preview/debug/peripheral-registers/">The Peripherals registers view</a></li>
</ul>

<h2 id="overview">Overview</h2>

<p>Although it varies a lot depending on personal skills and experience, debugging can be one of the most time consuming activities during software development, and any solutions intended to address it are welcome.</p>

<p>Generally there are two approaches:</p>

<ul>
  <li>manually stepping through the code to check the program flow and inspect various status variables</li>
  <li>letting the program run and automatically collect various tracing messages (like the traditional printf() calls) and/or execution events (enter/exit interrupt handlers, memory location change, etc)</li>
</ul>

<p>To be noted that these approaches are not exclusive, but complement each other, since they better serve different purposes, and have specific advantages and disadvantages.</p>

<h3 id="manual-stepping">Manual stepping</h3>

<p>Manually stepping through the code is great for debugging a standalone linear piece of code, to check if the implementation of an algorithm is correct, to detect off-by-one errors (accessing past the size of an array or collection). It is also useful to get an initial understanding of the functionality of a piece of code written by someone else. Its main drawback is severely distorting the time behaviour of the debugged code, which, if the debugged device is interacting with other external devices, will most likely trigger timeouts. For complex code, with multiple iterations and multiple processes, it is quite tedious, requiring a lot of manual interactions with the debugger to reach the desired point in time, especially when the sessions are expected to be restarted often.</p>

<p>The manual stepping approach generally requires a generic debugger and a specific method to connect it to the application to be debugged. The GNU toolchains provide a standard <strong>gdb</strong> command line tool to interact with the debugged application, and Eclipse provides various plug-ins to integrate the command line tool into the IDE.</p>

<p>The recommended way to connect gdb, running on the development machine, to the application, running on an embedded device, is to use a gdb server. If the debugged application is a GNU/Linux ARM application, running on an embedded device like BeagleBone or Raspberry, the gdb server must be first installed and started on it, then the gdb client needs to be instructed to connect via tcp/ip to it and start the debug session.</p>

<p>If the debugged application runs on a bare metal device, then it is necessary to use a physical probe, to load the device memory and to assist during the debugging session. The standard way is to use a JTAG or SWD probe, paired with a custom gdb server, able to talk to it on one side, and to accept the standard gdb commands on the other side.</p>

<h3 id="using-trace-messages">Using trace messages</h3>

<p>Collecting tracing messages and events, when used wisely, can be a valuable source of information regarding the flow of a complex application, with multiple interacting threads, being especially useful when the debug sessions are restarted often. Once the trace messages are added, the dynamic life of various threads/handlers can be seen with a simple view of the trace log. In addition to classical printf() messages that need to be manually inserted in the code, for embedded applications, modern ARM cores, including those in the Cortex-M families, provide special support for collecting hardware events, like accurate timestamps when an interrupt handler was entered/exited, when a memory location was accessed, and more.</p>

<p>Recognising the importance of these methods, the designers of the ARM families added special support, like the <strong>SWO</strong> (Serial Wire Output) pin in Cortex-M processors, or even more elaborate interfaces for larger ARM processors.</p>

<h2 id="gdb">GDB</h2>

<p>The tool used by GNU MCU Eclipse plug-ins for debugging is the ARM version of GDB, the venerable GNU debugging tool.</p>

<h3 id="no-initialisation-files">No initialisation files</h3>

<p>For having a total control of the debugging session, the debugging plug-ins start the GDB client process with the <code class="highlighter-rouge">--nx</code> option, which prevents the execution of the commands found in any initialization file; none of the standard files (<code class="highlighter-rouge">system.gdbinit</code>, <code class="highlighter-rouge">~/.gdbinit</code>, <code class="highlighter-rouge">./.gdbinit</code>) are loaded.</p>

<p>To add more commands to the GDB initialisation sequence, use the <em>Commands:</em> field in the <em>GDB Client Setup</em> section:</p>

<p><img src="/web-preview/assets/images/2015/launch-jlink-debugger-client.png" alt="Launch J-Link debugger client" /></p>

<p>All commands listed here are passed to the GDB client. By convention, commands prefixed with <code class="highlighter-rouge">mon</code> will be further passed from the GDB client to the GDB server.</p>


        


    <div class="tags">
        
    </div>

    


</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2020 Liviu Ionescu. All rights reserved. <br />
 Site last generated: Aug 17, 2020 <br />
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

<!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-16767008-13','auto');ga('require','displayfeatures');ga('send','pageview');</script>


</html>
